---
種別: 要件定義書
機能ID: "<FEATURE_ID>"
機能名: "<FEATURE_NAME>"
関連Issue: ["<ISSUE_NUMBER_OR_URL>"]
状態: "draft | approved"
作成者: "<YOUR_NAME>"
最終更新: "YYYY-MM-DD"
---

# <FEATURE_ID> <FEATURE_NAME> — 要件定義（WHAT / WHY）

## 目的（ユーザーに見える成果 / To-Be） (必須)
- （1〜3行）この機能でユーザーが「何をできるようになるか」を書く。

## 背景・現状（As-Is / 調査メモ） (必須)
- 現状の挙動（事実）:
  - ...
- 現状の課題（困っていること）:
  - ...
- 再現手順（最小で）:
  1) ...
  2) ...
- 観測点（どこを見て確認するか）:
  - UI: ...
  - HTTP: ...
  - DB: ...
  - Log: ...
- 実際の観測結果（貼れる範囲で）:
  - Input/Operation: ...
  - Output/State: ...
- 情報源（ヒアリング/調査の根拠）:
  - Issue/チケット: ...
  - ドキュメント: ...
  - コード: `<path/to/file>`（関数/クラス: ... / 仕様を決めている箇所（行番号）: ... / 読むべき理由） ...
  - 画面/ログ/DB: ...

## 対象ユーザー / 利用シナリオ (任意)
- 主な利用者（ロール）:
  - ...
- 代表的なシナリオ:
  - ...

## スコープ（暴走防止のガードレール） (必須)
- MUST（必ずやる）:
  - ...
- MUST NOT（絶対にやらない／追加しない）:
  - ...
- OUT OF SCOPE（今回やらない）:
  - ...

## 非交渉制約（守るべき制約） (必須)
- 例: 既存API互換を維持する
- 例: 依存追加はしない（必要なら要件に明記）
- 例: セキュリティ/プライバシー要件（ログ、マスキング、権限制御など）
- 例: 性能（p95など）やSLO
- ...

## 前提（Assumptions） (必須)
- 例: 対象ユーザーは〜である
- 例: 既存データは〜の状態である
- ...

## 判断材料/トレードオフ（Decision / Trade-offs） (任意)
- 論点: ...
  - 選択肢A: ...（Pros/Cons）
  - 選択肢B: ...（Pros/Cons）
  - 決定: ...
  - 理由: ...

## リスク/懸念（Risks） (任意)
- R-001: <リスク>（影響: ... / 対応: ...）
- R-002: ...

## 受け入れ条件（観測可能な振る舞い） (必須)
- AC-001:
  - Actor/Role: ...
  - Given: ...
  - When: ...
  - Then: ...
  - 観測点（UI/HTTP/DB/Log など）: ...
  - 権限/認可条件（ある場合）: ...
- AC-002:
  - Actor/Role: ...
  - Given: ...
  - When: ...
  - Then: ...
  - 観測点（UI/HTTP/DB/Log など）: ...
  - 権限/認可条件（ある場合）: ...

### 入力→出力例 (任意)
- EX-001:
  - Input: ...
  - Output: ...
- EX-002:
  - Input: ...
  - Output: ...

## 例外・エッジケース（仕様として固定） (必須)
- EC-001:
  - 条件: ...
  - 期待: ...（例: HTTP 4xx/5xx, エラーコード, 表示文言, ログ, DB状態）
  - 観測点（UI/HTTP/DB/Log など）: ...
- EC-002:
  - 条件: ...
  - 期待: ...
  - 観測点: ...

## 用語（ドメイン語彙） (必須)
- TERM-001: <用語> = <定義>
- TERM-002: ...

## 未確定事項（TBD / 要確認） (必須)
- Q-001:
  - 質問: TBD ...
  - 選択肢:
    - A: ...
    - B: ...
  - 推奨案（暫定）: ...
  - 影響範囲: AC-___ / EC-___ / スコープ / 制約 / ...
- Q-002:
  - 質問: TBD ...
  - 選択肢:
    - A: ...
    - B: ...
  - 推奨案（暫定）: ...
  - 影響範囲: ...

## 完了条件（Definition of Done） (必須)
- すべてのAC/ECが満たされる
- 未確定事項が解消される（残す場合は「残す理由」と「合意」を明記）
- MUST NOT / OUT OF SCOPE を破っていない（追加機能を入れていない）

## 省略/例外メモ (必須)
- 該当なし
