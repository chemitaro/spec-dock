---
種別: 実装計画書
機能ID: "<FEATURE_ID>"
機能名: "<FEATURE_NAME>"
関連Issue: ["<ISSUE_NUMBER_OR_URL>"]
状態: "draft | approved"
作成者: "<YOUR_NAME>"
最終更新: "YYYY-MM-DD"
依存: ["requirement.md", "design.md"]
---

# <FEATURE_ID> <FEATURE_NAME> — 実装計画（TDD: Red → Green → Refactor）

## この計画で満たす要件ID (必須)
- 対象AC: AC-001, AC-002, ...
- 対象EC: EC-001, ...
- 対象制約（該当があれば）: ...

## ステップ一覧（観測可能な振る舞い） (必須)
- [ ] S01: ...
- [ ] Sxx: ... (任意: 必要に応じて追加)

### 要件 ↔ ステップ対応表 (必須)
- AC-001 → S01
- AC-___ → Sxx (任意: 必要に応じて追加)
- EC-___ → Sxx (任意: 必要に応じて追加)
- （任意）非交渉制約 → Sxx（どのステップで担保/検証するか）

---

## 実装ステップ（各ステップは“観測可能な振る舞い”を1つ） (必須)

### S01 — <観測可能な振る舞い> (必須)
- 対象: AC-___ / EC-___
- 設計参照:
  - 対象IF/API: IF-___ / API-___
  - 対象テスト: `<test_file_path>::<test_name>`
- このステップで「追加しないこと（スコープ固定）」:
  - ...

#### update_plan（着手時に登録） (必須)
- [ ] `update_plan` に、このステップの作業ステップ（調査/Red/Green/Refactor/品質ゲート/報告/コミット）を登録した
- 登録例:
  - （調査）既存挙動/影響範囲の確認、設計参照の確認
  - （Red）失敗するテストの追加/修正
  - （Green）最小実装
  - （Refactor）整理
  - （品質ゲート）format/lint/test
  - （報告）`.spec-dock/current/report.md` 更新
  - （コミット）このステップの区切りでコミット

#### 期待する振る舞い（テストケース） (必須)
- Given: ...
- When: ...
- Then: ...
- 観測点（UI/HTTP/DB/Log など）: ...
- 追加/更新するテスト: `<test_file_path>::<test_name>`

#### Red（失敗するテストを先に書く） (任意)
- 期待する失敗:
  - ...

#### Green（最小実装） (任意)
- 変更予定ファイル:
  - Add: `<path/...>`
  - Modify: `<path/...>`
- 追加する概念（このステップで導入する最小単位）:
  - ...
- 実装方針（最小で。余計な最適化は禁止）:
  - ...

#### Refactor（振る舞い不変で整理） (任意)
- 目的:
  - ...
- 変更対象:
  - ...

#### ステップ末尾（省略しない） (必須)
- [ ] 期待するテスト（必要ならフォーマット/リンタ）を実行し、成功した
- [ ] `.spec-dock/current/report.md` に実行コマンド/結果/変更ファイルを記録した
- [ ] `update_plan` を更新し、このステップの作業ステップを完了にした
- [ ] コミットした（エージェント）

---

### Sxx — <追加の観測可能な振る舞い> (任意)
- （上の S01 と同じ構成で記載する。update_plan / 期待する振る舞い / ステップ末尾 は省略しない）
  ...

---

## 未確定事項（TBD） (必須)
- Q-001:
  - 質問: TBD ...
  - 選択肢:
    - A: ...
    - B: ...
  - 推奨案（暫定）: ...
  - 影響範囲: S__ / AC-__ / EC-__ / `design.md` / ...
- Q-002:
  - 質問: TBD ...
  - 選択肢:
    - A: ...
    - B: ...
  - 推奨案（暫定）: ...
  - 影響範囲: ...

## 完了条件（Definition of Done） (必須)
- 対象AC/ECがすべて満たされ、テストで保証されている
- MUST NOT / OUT OF SCOPE を破っていない（追加機能を入れていない）
- 品質ゲート（フォーマット/リント/テストのうち該当するもの）が満たされている

## 省略/例外メモ (必須)
- 該当なし
